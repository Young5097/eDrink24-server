<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.eDrink24.config.ProductMapper">


	<!-- 상품 정렬 -->
<select id="productFilter" parameterType="map" resultType="ProductDTO">
		SELECT * FROM Product
		ORDER BY
		<choose>
			<!-- test 속성 뒤의 조건식이 참일때 <when>블록 실행 -->
			<when test="sortProduct == 'price'">price</when>
			<when test="sortProduct == 'rating'">rating</when>
			<when test="sortProduct == 'countDibs'">countDibs</when>
			<!-- 위의 조건이 모두 충족되지 않을 때 <otherwise>블록 실행 -->
			<otherwise>productId</otherwise>
		</choose>
		<!-- 오름차순/내림차순 선택 -->
		<choose>
			<when test="sortDirection == 'desc'">DESC</when>
			<otherwise>ASC</otherwise>
		</choose>
	</select>


    
    <select id="showAllProduct" resultType="ProductDTO">
      select productName, category1, category2, price, defaultImage, countDibs
      from product
    </select>

  
    <select id="showProductByCategory1" resultType="ProductDTO" parameterType="string">
        select productName, category1, category2, price, defaultImage, countDibs
        from product
        where category1=#{category1}
    </select>

  
    <select id="showProductByCategory2" resultType="ProductDTO" parameterType="string">
        select productName, category1, category2, price, defaultImage, countDibs
        from product
        where category2=#{category2}
    </select>

</mapper>